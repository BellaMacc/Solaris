<html>
<head>
  
  <!-- Circles' head scripts [REQUIRED] -->
  <circles-start-scripts/>

  <script src = '/worlds/_Mood_World/scripts/flower-dialogue.js'></script>
</head>
<body>
  <!-- this is used to create our enter UI that creates a 2D overlay to capture a user gesture for sound/mic access etc. -->
  <circles-start-ui/>

  <!-- a-scene with 'circles-properties' component [REQUIRED] -->
  <a-scene circles_scene_properties>
    <a-assets>
      <!--Env-->
      <a-asset-item id="env_gltf" src="/worlds/_Mood_World/assets/models/moodFlowerEnv.glb" response-type="arraybuffer" ></a-asset-item>
      <!--Sky-->
      <img id="sky_map" src = "/worlds/_Self_World/assets/textures/cloudy_sky.jpg"></img>

      <!--NPCs-->
      <a-asset-item id="pudge_gltf" src= '/global/assets/models/gltf/solaris/misc/pudge.glb' response-type="arraybuffer" ></a-asset-item>
      <a-asset-item id="sproot_gltf" src= '/global/assets/models/gltf/solaris/misc/sproot.glb' response-type="arraybuffer" ></a-asset-item>
      
      <!--Sounds-->
      <a-asset-item  id = "sproot_dialogue" src = "/worlds/_Mood_World/assets/music/Sproot2.mp3" response-type="arraybuffer"></a-asset-item>
      <a-asset-item  id = "sproot_dialogue2" src = "/worlds/_Mood_World/assets/music/Sproot3.mp3" response-type="arraybuffer"></a-asset-item>
      
      <!--Sounds Effects-->
      <a-asset-item  id = "birdsFx1" src = "/worlds/_Mood_World/assets/env_sfx/birdsChirping1.mp3" response-type="arraybuffer"></a-asset-item>
      <a-asset-item  id = "birdsFx2" src = "/worlds/_Mood_World/assets/env_sfx/birdsChirping2.mp3" response-type="arraybuffer"></a-asset-item>
      <a-asset-item  id = "compFx" src = "/worlds/_Mood_World/assets/env_sfx/computerDefault.mp3" response-type="arraybuffer"></a-asset-item>
      <a-asset-item  id = "moodActiveFx" src = "/worlds/_Mood_World/assets/env_sfx/moodDetector_Activated.mp3" response-type="arraybuffer"></a-asset-item>
      <a-asset-item  id = "towerFx" src = "/worlds/_Mood_World/assets/env_sfx/towerSounds.mp3" response-type="arraybuffer"></a-asset-item>

      
      <!-- Circles' built-in assets [REQUIRED] -->
      <circles-assets/>
    </a-assets>

    <!-- Circles' built-in manager and avatar [REQUIRED] -->
    <circles-manager-avatar/>
    <!--lights-->
    <a-entity light="type:hemisphere; color:#e7e5cb; groundColor:#5d730c; intensity: 4.7" position = "0 10 -0.776"></a-entity>
    <!--env models-->
    <a-entity id="env_model" gltf-model="#env_gltf" visible='true'   shadow="receive:false; cast:false;" renderer="sortTransparentObjects: true"></a-entity>
     <!--sky-->
    <a-entity id="skySphere" scale=" 3 3 3">
      <a-sky src = "#sky_map"></a-sky>
    </a-entity>
    <!--flower manager-->
    <a-entity id = "flower-manager" solaris-flower-manager></a-entity>
    <a-entity id = "button-grp" position = '-30.910 0.114 2.050' scale = "1 1 1" rotation = '0 5.7 -41'>
      <a-entity id = "flower-bttn-1" solaris-flower-bttn circles-button = "button_color: rgb(191, 191, 191); pedastal_color: rgb(133, 154, 130) button_color_hover: rgb(97, 97, 97)" position = '0 0.373 0.857' scale = "0.5 0.5 0.5" rotation = '0 0 0'></a-entity>
      <a-entity id = "flower-bttn-2" solaris-flower-bttn = "flowerColor: red" circles-button ="pedastal_color: rgb(133, 154, 130);" position = '0 0.373 1.249' scale = "0.5 0.5 0.5" rotation = '0 0 0'>></a-entity>
      <a-entity id = "flower-bttn-3" solaris-flower-bttn = "flowerColor: blue" circles-button = "button_color: rgb(85, 120, 201); pedastal_color: rgb(133, 154, 130); button_color_hover: rgb(41, 67, 128)" position = '0 0.373 1.605' scale = "0.5 0.5 0.5" rotation = '0 0 0'>></a-entity>
      <a-entity id = "flower-bttn-4" solaris-flower-bttn = "flowerColor: yellow" circles-button = "button_color: rgb(219, 184, 77); pedastal_color: rgb(133, 154, 130); button_color_hover: rgb(173, 153, 23)" position = '0 0.373 1.934' scale = "0.5 0.5 0.5" rotation = '0 0 0'>></a-entity>
    </a-entity>
     <!--sproot-->
     <a-entity id="instruction_dialogue" position="5.66193 1.187 -7.836" circles-sound = "src:#sproot_dialogue; type:dialogue" ></a-entity>
     <a-entity id="sproot_model" gltf-model="#sproot_gltf" position="5.66193 1.187 -7.836" animation-mixer="clip: Sproot_Idle" rotation="0 -90 0"></a-entity>
     <a-box id="sproot_collider" class="interactive" cirlces-interactive-object position="5.76155 3.14207 -7.836" visible="false" onclick-sproot="modelID: #sproot_model; dialogueID: #instruction_dialogue" material="" scale="1.8 2.98 1"></a-box>
    
     <!--pudge dialogue-->
     <a-entity id="pudge_model" gltf-model="#pudge_gltf" position="-32.23337 -0.456 1.65485"  rotation="0 -17.39 0"></a-entity>
     <a-entity id="flwr_dialogue"  position="-32.23337 1 1.65485" circles-sound = "src:#sproot_dialogue2; type:dialogue" ></a-entity>

     <!--Sounds Effects-->
     
    <a-entity id="birds1_sfx" position="      -8      1    -16" circles-sound = "src:#birdsFx1; volume:0.8; autoplay:true; type: foley; loop:true"></a-entity>
    <a-entity id="birds2_sfx" position=" -10.924  5.934 17.335" circles-sound = "src:#birdsFx2; autoplay:true; type: foley; loop:true"></a-entity>
    <a-entity id="roboHum_sfx" position="     -8      1    -16" circles-sound = "src:#compFx; volume:0.3; autoplay:true; type: foley; loop:true"></a-entity>
    <a-entity id="tower_sfx"  position="     -35      6    5.5" circles-sound = "src:#towerFx; volume:0.4; autoplay:true; type: foley; loop:true"></a-entity>
    
    <a-entity id="compHum_sfx" position="-31.066 -0.292    3.5" circles-sound = "src:#compFx; volume:0.25; autoplay:true; type: foley; loop:true"></a-entity>
    <a-entity id="moodActive_sfx" position="-31.066 -0.292 3.5" circles-sound = "src:#moodActiveFx; volume:0.5; autoplay:false; type: foley; loop:false"></a-entity>

    <a-entity flower-dialogue = "dialogueID:#flwr_dialogue"></a-entity>
  </a-scene>

  <!-- Circles' end scripts [REQUIRED] -->
  <circles-end-scripts/>
 </body>
</html>